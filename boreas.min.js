var Boreas=function(e){function t(o){if(n[o])return n[o].exports;var r=n[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=9)}([function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(3),f=o(l),c=n(8),d=o(c),p=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.__events={},e.__registerEvents(["ready"]),e}return a(t,e),s(t,[{key:"initialize",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.trigger("ready")}},{key:"on",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:function(e,t){};return e&&t&&"function"==typeof t?void 0===this.__events[e]?(this.log(this.constructor.name+'.on: Событие "'+e+'" не определено'),!1):this.__events[e].addHandler(t):(this.log(this.constructor.name+".on: Не переданы обязательные параметры"),!1)}},{key:"off",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return!!e&&(void 0===this.__events[e]?(this.log(this.constructor.name+'.off: Событие "'+e+'" не определено'),!1):t&&"function"==typeof t?void this.__events[e].removeHandler(t):(delete this.__events[e],!0))}},{key:"trigger",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return void 0!==this.__events[e]&&this.__events[e].execute(t)}},{key:"__registerEvents",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(!t)return!1;if("object"==(void 0===t?"undefined":u(t)))t.forEach(function(t,n){e.__events[t]=new d.default({name:t})});else if("string"==typeof t){var n=t;this.__events[n]=new d.default({name:n})}return!0}}]),t}(f.default);t.default=p},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.__registerEvents(["progress","start"]),e}return i(t,e),a(t,[{key:"initialize",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=Object.assign({},this.params,e),this.trigger("progress",{percent:100}),this.trigger("ready")}},{key:"getStatus",value:function(){return{total:0,loaded:0}}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(1),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=function(e){function t(){o(this,t);var e=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.params={selector:"html",regex:{file:/(?:href="(.*?)")|(?:src="(.*?)")|(?:url\((.*?)\))/gi,quote:/(&quot;)|(')|(")/g},extensions:{image:["jpg","jpeg","png","gif","svg"],css:["css","less","scss"]},searchInCss:!0},e.__found=null,e.__loaded=[],e}return i(t,e),a(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.params=Object.assign({},this.params,t),this.__found={};for(var n in this.params.extensions)this.__found[n]=[];var o=$(this.params.selector).html();this.__findSources(o),!0===this.params.searchInCss&&this.__found.css.length?this.__processCss(o).done(function(){e.__loadFiles()}):this.__loadFiles()}},{key:"getStatus",value:function(){return{total:this.__found.image.length,loaded:this.__loaded.length}}},{key:"__findSources",value:function(e){for(var t=void 0;t=this.params.regex.file.exec(e);)for(var n=t.length-1;n>=0;n--)if(void 0!==t[n]){var o=t[n];if(o=o.replace(this.params.regex.quote,""),!o.length||"#"==o||-1!==o.indexOf("data:"))break;var r=this.__identifyFileType(o);r&&this.__found[r].push(o);break}}},{key:"__identifyFileType",value:function(e){var t=!1,n=/[.]/.exec(e)?/[^.]+$/.exec(e).toString():void 0;if(void 0===n)return!1;for(var o in this.params.extensions)if(-1!==this.params.extensions[o].indexOf(n)){t=o;break}return t}},{key:"__loadFiles",value:function(){var e=this;if(this.__found.image.length){for(var t in this.__found.image)this.__loadFileAsync(this.__found.image[t]).promise().done(function(){e.__updateStatus(e.__found.image)})}}},{key:"__updateStatus",value:function(e){var t=this.getStatus();this.__loaded||(this.__loaded=[]),this.__loaded.push(e),this.trigger("progress",t),t.total==t.loaded&&this.trigger("ready")}},{key:"__loadFileAsync",value:function(e){var t=new $.Deferred,n=new Image;return n.src=e,n.onload=function(){t.resolve()},n.onerror=function(){t.resolve()},t}},{key:"__processCss",value:function(){var e=[];for(var t in this.__found.css)e.push(this.__processUrlAsync(this.__found.css[t]));return $.when.apply(void 0,e).promise()}},{key:"__processUrlAsync",value:function(e){var t=this,n=new $.Deferred;return $.ajax({url:e}).done(function(e){t.__findSources(e),n.resolve()}).fail(function(){n.resolve()}),n}}]),t}(s.default);t.default=l},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),i=function(){function e(){o(this,e)}return r(e,[{key:"log",value:function(e){console&&console.log&&console.log(e)}}]),e}();t.default=i},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l=0,f=function(e){function t(){return o(this,t),r(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"process",value:function(){arguments.length>0&&void 0!==arguments[0]&&!arguments[0]?this.hide():this.show()}},{key:"show",value:function(){1===++l&&this.__showLoader()}},{key:"hide",value:function(){l>0&&l--,0===l&&this.__hideLoader()}},{key:"__showLoader",value:function(){"undefined"!=typeof BX?BX.showWait():console&&console.log&&console.log("Для работы данного метода должна быть загружена и инициализирована библиотека CJSCore из 1C-Битрикс")}},{key:"__hideLoader",value:function(){"undefined"!=typeof BX?BX.showWait():console&&console.log&&console.log("Для работы данного метода должна быть загружена и инициализирована библиотека CJSCore из 1C-Битрикс")}}]),t}(s.default);t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(0),l=o(s),f=n(2),c=o(f),d=function(e){function t(){r(this,t);var e=i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.__registerEvents(["progress"]),e.params={handlers:[],methods:{show:e.__showPreloader,update:e.__updatePreloader,hide:e.__hidePreloader},delay:400,timeout:1e4},e.__handlers=[],e.__progress={},e.__total=0,e.__loaded=0,e.__$preloader=null,e}return a(t,e),u(t,[{key:"initialize",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=this,o=!1;if(this.params=Object.assign({},this.params,t),this.params.methods.show(),this.addHandler("images",c.default),t.handlers.length)for(var r in t.handlers){var i=t.handlers[r];void 0===i.params&&(i.params={}),this.addHandler(i.name,i.class,i.params)}this.__load(),setTimeout(function(){!1===o&&(n.__forceFinish(),o=!0)},this.params.timeout),this.on("progress",function(t){var r=n.__getStatus();e.params.methods.update(r),r.loaded==r.total&&setTimeout(function(){!1===o&&(n.trigger("ready"),o=!0)},n.params.delay)}),this.on("ready",function(){e.params.methods.hide()})}},{key:"addHandler",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.__handlers.push({name:e,class:t,params:n})}},{key:"__showPreloader",value:function(){$("body").addClass("boreas-preloader-opened"),this.__$preloader=$(".boreas-preloader"),this.__$preloader.length||(this.__$preloader=$('<div class="boreas-preloader">\n\t\t\t\t<div class="progress">\n\t\t\t\t\t<div class="progress-bar" role="progressbar" style="width: 0%"></div>\n\t\t\t\t</div>\n\t\t\t</div>'),$("body").append(this.__$preloader))}},{key:"__updatePreloader",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.__getStatus(),t=parseInt(100/e.total*e.loaded);this.__$preloader.find(".progress-bar").css({width:t+"%"}).attr("aria-valuenow",t)}},{key:"__hidePreloader",value:function(){$("body").removeClass("boreas-preloader-opened"),this.__$preloader.fadeOut()}},{key:"__forceFinish",value:function(){var e=this.__getStatus();e.loaded=e.total,this.params.methods.update(e),_this.trigger("ready")}},{key:"__load",value:function(){var e=this;for(var t in this.__handlers)this.__handlers[t].instance=new this.__handlers[t].class,this.__handlers[t].instance.on("progress",function(t){e.trigger("progress",e.__getStatus())}),this.__handlers[t].instance.initialize(this.__handlers[t].params)}},{key:"__getStatus",value:function(){var e={total:0,loaded:0};for(var t in this.__handlers){var n=this.__handlers[t].instance.getStatus();e.total+=n.total,e.loaded+=n.loaded}return e}}]),t}(l.default);t.default=d},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(u),l={modules:[{name:"loader",load:!0,async:!0,params:{param1:"value1",param2:"value2"}}]},f={name:null,load:"auto",async:!0,params:void 0},c=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.params=Object.assign({},l,e),n.$container=$("html"),n.__includeModules(n.params.modules),n}return i(t,e),a(t,[{key:"initialize",value:function(){var e=this;this.__loadModules(this.params.modules,function(){e.trigger("ready")})}},{key:"registerModule",value:function(e){e=Object.assign({},f,e),this.params.modules.push(e)}},{key:"__includeModules",value:function(e){var t=this;e.forEach(function(e,o){var r=void 0;"string"==typeof e&&(e={name:e}),e=Object.assign({},f,e),void 0!==e.class?t[e.name]=new e.class:(r=n(10)("./"+e.name).default,t[e.name]=new r)})}},{key:"__loadModules",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=this,i=!1===o?null:[];if(e.forEach(function(e,t){"string"==typeof e&&(e={name:e}),e=Object.assign({},f,e),o===e.async&&r.__isModuleEnabled(e)&&(!1===o?null===i?i=r.__loadModule(e).promise():i.done(function(){i=r.__loadModule(e).promise()}):i.push(r.__loadModule(e,!0)))}),!1!==o)return $.when.apply(void 0,i).promise();null===i?this.__loadModules(e,null,!0).done(n):i.done(function(){t.__loadModules(e,null,!0).done(n)})}},{key:"__isModuleEnabled",value:function(e){var t=void 0;if(!0===e.load)return!0;if("auto"===e.load){var n=this.$container.data("boreas-modules");if(n&&(t=n.split(" "),-1!==t.indexOf(e.name)))return!0}return!1}},{key:"__loadModule",value:function(e){var t=new $.Deferred;return this[e.name].on("ready",function(){t.resolve()}),this[e.name].initialize(e.params),t}}]),t}(s.default);t.default=c},function(e,t,n){"use strict";function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":r(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.default=o},function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s=n(3),l=function(e){return e&&e.__esModule?e:{default:e}}(s),f=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};o(this,t);var n=r(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.name=void 0!==e.name?e.name:null,n.handlers=[],n}return i(t,e),u(t,[{key:"addHandler",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t={};return"object"==(void 0===e?"undefined":a(e))&&"function"==typeof e.callback?t=e:"function"==typeof e?t.callback=e:this.log("Неправильные параметры хэндлера"),"function"==typeof t.callback&&(this.handlers.push(t),!0)}},{key:"removeHandler",value:function(e){return this.handlers.length&&this.handlers.forEach(function(t,n,o){t.callback===e&&o.splice(n,1)}),!1}},{key:"execute",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.handlers.length&&this.handlers.forEach(function(t,n){return t.callback(e,t),!0}),!1}}]),t}(l.default);t.default=f},function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.preloaderHandler=t.extend=t.module=t.application=void 0;var r=n(6),i=o(r),a=n(0),u=o(a),s=n(1),l=o(s),f=n(7),c=o(f);t.application=i.default,t.module=u.default,t.extend=c.default,t.preloaderHandler=l.default},function(e,t,n){function o(e){return n(r(e))}function r(e){var t=i[e];if(!(t+1))throw new Error("Cannot find module '"+e+"'.");return t}var i={"./loader":4,"./loader.js":4,"./preloader":5,"./preloader.js":5,"./preloader/handler":1,"./preloader/handler.js":1,"./preloader/imagesHandler":2,"./preloader/imagesHandler.js":2};o.keys=function(){return Object.keys(i)},o.resolve=r,e.exports=o,o.id=10}]);
//# sourceMappingURL=boreas.min.js.map